<%- include('partials/header') %>
<main class="container">
  <h2 style="margin-bottom:24px;">Mes albums</h2>
  <form action="/albums/new" method="POST" style="display:flex;gap:8px;margin-bottom:24px;align-items:center;flex-wrap:wrap;">
    <input type="text" name="title" placeholder="Titre de l’album" required style="padding:8px 12px;border-radius:4px;border:1px solid #ccc;min-width:180px;">
    <input type="text" name="description" placeholder="Description (optionnel)" style="padding:8px 12px;border-radius:4px;border:1px solid #ccc;min-width:220px;flex:1;">
    <button type="submit" style="padding:9px 18px;border:none;background:#3897f0;color:white;border-radius:4px;font-weight:bold;cursor:pointer;transition:background .2s;">Créer l’album</button>
  </form>

  <% if (albums.length === 0) { %>
    <div style="color:#888;font-style:italic;text-align:center;margin-top:48px;">Vous n’avez pas encore d’album.<br>Créez-en un pour commencer à regrouper vos posts !</div>
  <% } else { %>
    <div style="display:flex;flex-wrap:wrap;gap:24px;">
      <% albums.forEach(album => { %>
        <a href="/album/<%= album._id %>" style="text-decoration:none;color:inherit;flex:1 1 250px;max-width:320px;">
          <div style="background:white;border-radius:10px;box-shadow:0 2px 8px #0001;padding:18px 20px 16px 20px;display:flex;flex-direction:column;min-height:120px;transition:box-shadow .2s;">
            <div style="font-size:1.15em;font-weight:bold; margin-bottom:5px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden;">
              <%= album.title %>
            </div>
            <% if(album.description) { %>
              <div style="color:#888;margin-bottom:10px;font-style:italic;font-size:.98em;"><%= album.description %></div>
            <% } %>
            <div style="margin-top:auto;display:flex;align-items:center;gap:6px;">
              <i class="fas fa-images" style="color:#3897f0;"></i>
              <span style="font-size:.97em;"><%= album.posts.length %> post<%= album.posts.length>1?'s':'' %></span>
            </div>
          </div>
        </a>
      <% }) %>
    </div>
  <% } %>
</main>
<%- include('partials/footer') %>
